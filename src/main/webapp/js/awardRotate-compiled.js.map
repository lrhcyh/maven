{"version":3,"sources":["awardRotate.js"],"names":[],"mappings":"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","file":"awardRotate-compiled.js","sourcesContent":["(function($) {\r\nvar supportedCSS,styles=document.getElementsByTagName(\"head\")[0].style,toCheck=\"transformProperty WebkitTransform OTransform msTransform MozTransform\".split(\" \");\r\nfor (var a=0;a<toCheck.length;a++) if (styles[toCheck[a]] !== undefined) supportedCSS = toCheck[a];\r\n// Bad eval to preven google closure to remove it from code o_O\r\n// After compresion replace it back to var IE = 'v' == '\\v'\r\nvar IE = eval('\"v\"==\"\\v\"');\r\n\r\njQuery.fn.extend({\r\n    rotate:function(parameters)\r\n    {\r\n        if (this.length===0||typeof parameters==\"undefined\") return;\r\n            if (typeof parameters==\"number\") parameters={angle:parameters};\r\n        var returned=[];\r\n        for (var i=0,i0=this.length;i<i0;i++)\r\n            {\r\n                var element=this.get(i);\t\r\n                if (!element.Wilq32 || !element.Wilq32.PhotoEffect) {\r\n\r\n                    var paramClone = $.extend(true, {}, parameters); \r\n                    var newRotObject = new Wilq32.PhotoEffect(element,paramClone)._rootObj;\r\n\r\n                    returned.push($(newRotObject));\r\n                }\r\n                else {\r\n                    element.Wilq32.PhotoEffect._handleRotation(parameters);\r\n                }\r\n            }\r\n            return returned;\r\n    },\r\n    getRotateAngle: function(){\r\n        var ret = [];\r\n        for (var i=0,i0=this.length;i<i0;i++)\r\n            {\r\n                var element=this.get(i);\t\r\n                if (element.Wilq32 && element.Wilq32.PhotoEffect) {\r\n                    ret[i] = element.Wilq32.PhotoEffect._angle;\r\n                }\r\n            }\r\n            return ret;\r\n    },\r\n    stopRotate: function(){\r\n        for (var i=0,i0=this.length;i<i0;i++)\r\n            {\r\n                var element=this.get(i);\t\r\n                if (element.Wilq32 && element.Wilq32.PhotoEffect) {\r\n                    clearTimeout(element.Wilq32.PhotoEffect._timer);\r\n                }\r\n            }\r\n    }\r\n});\r\n\r\n// Library agnostic interface\r\n\r\nWilq32=window.Wilq32||{};\r\nWilq32.PhotoEffect=(function(){\r\n\r\n\tif (supportedCSS) {\r\n\t\treturn function(img,parameters){\r\n\t\t\timg.Wilq32 = {\r\n\t\t\t\tPhotoEffect: this\r\n\t\t\t};\r\n            \r\n            this._img = this._rootObj = this._eventObj = img;\r\n            this._handleRotation(parameters);\r\n\t\t}\r\n\t} else {\r\n\t\treturn function(img,parameters) {\r\n\t\t\t// Make sure that class and id are also copied - just in case you would like to refeer to an newly created object\r\n            this._img = img;\r\n\r\n\t\t\tthis._rootObj=document.createElement('span');\r\n\t\t\tthis._rootObj.style.display=\"inline-block\";\r\n\t\t\tthis._rootObj.Wilq32 = \r\n\t\t\t\t{\r\n\t\t\t\t\tPhotoEffect: this\r\n\t\t\t\t};\r\n\t\t\timg.parentNode.insertBefore(this._rootObj,img);\r\n\t\t\t\r\n\t\t\tif (img.complete) {\r\n\t\t\t\tthis._Loader(parameters);\r\n\t\t\t} else {\r\n\t\t\t\tvar self=this;\r\n\t\t\t\t// TODO: Remove jQuery dependency\r\n\t\t\t\tjQuery(this._img).bind(\"load\", function()\r\n\t\t\t\t{\r\n\t\t\t\t\tself._Loader(parameters);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})();\r\n\r\nWilq32.PhotoEffect.prototype={\r\n    _setupParameters : function (parameters){\r\n\t\tthis._parameters = this._parameters || {};\r\n        if (typeof this._angle !== \"number\") this._angle = 0 ;\r\n        if (typeof parameters.angle===\"number\") this._angle = parameters.angle;\r\n        this._parameters.animateTo = (typeof parameters.animateTo===\"number\") ? (parameters.animateTo) : (this._angle); \r\n\r\n        this._parameters.step = parameters.step || this._parameters.step || null;\r\n\t\tthis._parameters.easing = parameters.easing || this._parameters.easing || function (x, t, b, c, d) { return -c * ((t=t/d-1)*t*t*t - 1) + b; }\r\n\t\tthis._parameters.duration = parameters.duration || this._parameters.duration || 1000;\r\n        this._parameters.callback = parameters.callback || this._parameters.callback || function(){};\r\n        if (parameters.bind && parameters.bind != this._parameters.bind) this._BindEvents(parameters.bind); \r\n\t},\r\n\t_handleRotation : function(parameters){\r\n          this._setupParameters(parameters);\r\n          if (this._angle==this._parameters.animateTo) {\r\n              this._rotate(this._angle);\r\n          }\r\n          else { \r\n              this._animateStart();          \r\n          }\r\n\t},\r\n\r\n\t_BindEvents:function(events){\r\n\t\tif (events && this._eventObj) \r\n\t\t{\r\n            // Unbinding previous Events\r\n            if (this._parameters.bind){\r\n                var oldEvents = this._parameters.bind;\r\n                for (var a in oldEvents) if (oldEvents.hasOwnProperty(a)) \r\n                        // TODO: Remove jQuery dependency\r\n                        jQuery(this._eventObj).unbind(a,oldEvents[a]);\r\n            }\r\n\r\n            this._parameters.bind = events;\r\n\t\t\tfor (var a in events) if (events.hasOwnProperty(a)) \r\n\t\t\t\t// TODO: Remove jQuery dependency\r\n\t\t\t\t\tjQuery(this._eventObj).bind(a,events[a]);\r\n\t\t}\r\n\t},\r\n\r\n\t_Loader:(function()\r\n\t{\r\n\t\tif (IE)\r\n\t\treturn function(parameters)\r\n\t\t{\r\n\t\t\tvar width=this._img.width;\r\n\t\t\tvar height=this._img.height;\r\n\t\t\tthis._img.parentNode.removeChild(this._img);\r\n\t\t\t\t\t\t\t\r\n\t\t\tthis._vimage = this.createVMLNode('image');\r\n\t\t\tthis._vimage.src=this._img.src;\r\n\t\t\tthis._vimage.style.height=height+\"px\";\r\n\t\t\tthis._vimage.style.width=width+\"px\";\r\n\t\t\tthis._vimage.style.position=\"absolute\"; // FIXES IE PROBLEM - its only rendered if its on absolute position!\r\n\t\t\tthis._vimage.style.top = \"0px\";\r\n\t\t\tthis._vimage.style.left = \"0px\";\r\n\r\n\t\t\t/* Group minifying a small 1px precision problem when rotating object */\r\n\t\t\tthis._container =  this.createVMLNode('group');\r\n\t\t\tthis._container.style.width=width;\r\n\t\t\tthis._container.style.height=height;\r\n\t\t\tthis._container.style.position=\"absolute\";\r\n\t\t\tthis._container.setAttribute('coordsize',width-1+','+(height-1)); // This -1, -1 trying to fix ugly problem with small displacement on IE\r\n\t\t\tthis._container.appendChild(this._vimage);\r\n\t\t\t\r\n\t\t\tthis._rootObj.appendChild(this._container);\r\n\t\t\tthis._rootObj.style.position=\"relative\"; // FIXES IE PROBLEM\r\n\t\t\tthis._rootObj.style.width=width+\"px\";\r\n\t\t\tthis._rootObj.style.height=height+\"px\";\r\n\t\t\tthis._rootObj.setAttribute('id',this._img.getAttribute('id'));\r\n\t\t\tthis._rootObj.className=this._img.className;\t\t\t\r\n\t\t    this._eventObj = this._rootObj;\t\r\n\t\t    this._handleRotation(parameters);\t\r\n\t\t}\r\n\t\telse\r\n\t\treturn function (parameters)\r\n\t\t{\r\n\t\t\tthis._rootObj.setAttribute('id',this._img.getAttribute('id'));\r\n\t\t\tthis._rootObj.className=this._img.className;\r\n\t\t\t\r\n\t\t\tthis._width=this._img.width;\r\n\t\t\tthis._height=this._img.height;\r\n\t\t\tthis._widthHalf=this._width/2; // used for optimisation\r\n\t\t\tthis._heightHalf=this._height/2;// used for optimisation\r\n\t\t\t\r\n\t\t\tvar _widthMax=Math.sqrt((this._height)*(this._height) + (this._width) * (this._width));\r\n\r\n\t\t\tthis._widthAdd = _widthMax - this._width;\r\n\t\t\tthis._heightAdd = _widthMax - this._height;\t// widthMax because maxWidth=maxHeight\r\n\t\t\tthis._widthAddHalf=this._widthAdd/2; // used for optimisation\r\n\t\t\tthis._heightAddHalf=this._heightAdd/2;// used for optimisation\r\n\t\t\t\r\n\t\t\tthis._img.parentNode.removeChild(this._img);\t\r\n\t\t\t\r\n\t\t\tthis._aspectW = ((parseInt(this._img.style.width,10)) || this._width)/this._img.width;\r\n\t\t\tthis._aspectH = ((parseInt(this._img.style.height,10)) || this._height)/this._img.height;\r\n\t\t\t\r\n\t\t\tthis._canvas=document.createElement('canvas');\r\n\t\t\tthis._canvas.setAttribute('width',this._width);\r\n\t\t\tthis._canvas.style.position=\"relative\";\r\n\t\t\tthis._canvas.style.left = -this._widthAddHalf + \"px\";\r\n\t\t\tthis._canvas.style.top = -this._heightAddHalf + \"px\";\r\n\t\t\tthis._canvas.Wilq32 = this._rootObj.Wilq32;\r\n\t\t\t\r\n\t\t\tthis._rootObj.appendChild(this._canvas);\r\n\t\t\tthis._rootObj.style.width=this._width+\"px\";\r\n\t\t\tthis._rootObj.style.height=this._height+\"px\";\r\n            this._eventObj = this._canvas;\r\n\t\t\t\r\n\t\t\tthis._cnv=this._canvas.getContext('2d');\r\n            this._handleRotation(parameters);\r\n\t\t}\r\n\t})(),\r\n\r\n\t_animateStart:function()\r\n\t{\t\r\n\t\tif (this._timer) {\r\n\t\t\tclearTimeout(this._timer);\r\n\t\t}\r\n\t\tthis._animateStartTime = +new Date;\r\n\t\tthis._animateStartAngle = this._angle;\r\n\t\tthis._animate();\r\n\t},\r\n    _animate:function()\r\n    {\r\n         var actualTime = +new Date;\r\n         var checkEnd = actualTime - this._animateStartTime > this._parameters.duration;\r\n\r\n         // TODO: Bug for animatedGif for static rotation ? (to test)\r\n         if (checkEnd && !this._parameters.animatedGif) \r\n         {\r\n             clearTimeout(this._timer);\r\n         }\r\n         else \r\n         {\r\n             if (this._canvas||this._vimage||this._img) {\r\n                 var angle = this._parameters.easing(0, actualTime - this._animateStartTime, this._animateStartAngle, this._parameters.animateTo - this._animateStartAngle, this._parameters.duration);\r\n                 this._rotate((~~(angle*10))/10);\r\n             }\r\n             if (this._parameters.step) {\r\n                this._parameters.step(this._angle);\r\n             }\r\n             var self = this;\r\n             this._timer = setTimeout(function()\r\n                     {\r\n                     self._animate.call(self);\r\n                     }, 10);\r\n         }\r\n\r\n         // To fix Bug that prevents using recursive function in callback I moved this function to back\r\n         if (this._parameters.callback && checkEnd){\r\n             this._angle = this._parameters.animateTo;\r\n             this._rotate(this._angle);\r\n             this._parameters.callback.call(this._rootObj);\r\n         }\r\n     },\r\n\r\n\t_rotate : (function()\r\n\t{\r\n\t\tvar rad = Math.PI/180;\r\n\t\tif (IE)\r\n\t\treturn function(angle)\r\n\t\t{\r\n            this._angle = angle;\r\n\t\t\tthis._container.style.rotation=(angle%360)+\"deg\";\r\n\t\t}\r\n\t\telse if (supportedCSS)\r\n\t\treturn function(angle){\r\n            this._angle = angle;\r\n\t\t\tthis._img.style[supportedCSS]=\"rotate(\"+(angle%360)+\"deg)\";\r\n\t\t}\r\n\t\telse \r\n\t\treturn function(angle)\r\n\t\t{\r\n            this._angle = angle;\r\n\t\t\tangle=(angle%360)* rad;\r\n\t\t\t// clear canvas\t\r\n\t\t\tthis._canvas.width = this._width+this._widthAdd;\r\n\t\t\tthis._canvas.height = this._height+this._heightAdd;\r\n\t\t\t\t\t\t\r\n\t\t\t// REMEMBER: all drawings are read from backwards.. so first function is translate, then rotate, then translate, translate..\r\n\t\t\tthis._cnv.translate(this._widthAddHalf,this._heightAddHalf);\t// at least center image on screen\r\n\t\t\tthis._cnv.translate(this._widthHalf,this._heightHalf);\t\t\t// we move image back to its orginal \r\n\t\t\tthis._cnv.rotate(angle);\t\t\t\t\t\t\t\t\t\t// rotate image\r\n\t\t\tthis._cnv.translate(-this._widthHalf,-this._heightHalf);\t\t// move image to its center, so we can rotate around its center\r\n\t\t\tthis._cnv.scale(this._aspectW,this._aspectH); // SCALE - if needed ;)\r\n\t\t\tthis._cnv.drawImage(this._img, 0, 0);\t\t\t\t\t\t\t// First - we draw image\r\n\t\t}\r\n\r\n\t})()\r\n}\r\n\r\nif (IE)\r\n{\r\nWilq32.PhotoEffect.prototype.createVMLNode=(function(){\r\ndocument.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\r\n\t\ttry {\r\n\t\t\t!document.namespaces.rvml && document.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\r\n\t\t\treturn function (tagName) {\r\n\t\t\t\treturn document.createElement('<rvml:' + tagName + ' class=\"rvml\">');\r\n\t\t\t};\r\n\t\t} catch (e) {\r\n\t\t\treturn function (tagName) {\r\n\t\t\t\treturn document.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">');\r\n\t\t\t};\r\n\t\t}\t\t\r\n})();\r\n}\r\n\r\n})(jQuery);\r\n"]}